import{M as r,P as b,a as c,b as g,c as l,f as A,g as d,qa as i}from"./chunk-PFRGIR2F.js";var f=class o{constructor(s){this.http=s}createAssessment(s){let e=new r({Authorization:`Bearer ${s}`});return this.http.post(i.create,{},{headers:e}).pipe(g(t=>({assessmentId:t.assessmentId??t.id??""})),l(t=>(console.error("createAssessment failed",t),c(()=>t))))}listAssessments(s){let e=new r({Authorization:`Bearer ${s}`});return this.http.get(i.create,{headers:e})}fetchQuestions(s,e){let t=new r({Authorization:`Bearer ${e}`});return this.http.get(i.questions(s),{headers:t}).pipe(g(n=>{let a=Array.isArray(n)?n.find(u=>u.id===s)??n[0]:n;if(!a||!a.pages?.length)return{questions:[],answers:[]};let h=a.pages.flatMap(u=>u.questions.map(m=>({id:m.id,question:m.title,options:m.options.map(p=>({id:p.id,text:p.label,value:p.label}))}))),w=a.answers||[];return{questions:h,answers:w}}),l(n=>(console.error("fetchQuestions failed",n),c(()=>n))))}submitTest(s,e,t){let n=new r({Authorization:`Bearer ${e}`});return this.http.post(i.submit(s),t,{headers:n})}fetchResult(s,e){let t=new r({Authorization:`Bearer ${e}`});return this.http.get(i.result(s),{headers:t})}static \u0275fac=function(e){return new(e||o)(d(b))};static \u0275prov=A({token:o,factory:o.\u0275fac,providedIn:"root"})};export{f as a};
